Ye gods but I need to write some tests for this.
